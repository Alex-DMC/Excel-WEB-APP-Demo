(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.excel = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const button = [
    {
        cmd: 'open',
        text: '打开',
        disabled: true,
    }, {
        cmd: 'save',
        text: '保存',
    },
    '|',
    {
        cmd: 'bold',
        text: '加粗',
    }, {
        cmd: 'italic',
        text: '倾斜',
    },
    '|',
    {
        cmd: 'alignLeft',
        text: '左对齐',
    }, {
        cmd: 'alignCenter',
        text: '居中',
    }, {
        cmd: 'alignRight',
        text: '右对齐',
    },
    '|',
    {
        cmd: 'columnAsc',
        text: '正序',
    }, {
        cmd: 'columnDesc',
        text: '倒序',
    },
];
exports.button = button;
const grid = {
    row: 200,
    column: 26,
};
exports.grid = grid;
const column = {
    select: 'A',
};
exports.column = column;
exports.default = button;
},{}],2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const layout_1 = require("./config/layout");
const layout_2 = require("./view/layout");
const message_1 = require("./module/message");
class Excel {
    constructor(id = 'app', data = []) {
        this.config = {
            grid: layout_1.grid,
            buttons: layout_1.button,
            column: layout_1.column,
        };
        this.id = id;
        this.view = document.getElementById(id) || null;
        this._column = this.config.column.select || 'A';
        this._data = data;
        if (!this.view) {
            console.error(`The element with ID ${id} did not find the view that could not be initialized.`);
            throw '初始化失败！';
        }
        setTimeout(() => {
            this.init();
        }, 1000);
    }
    init() {
        const layout = this._layout = new layout_2.default(this.view, this.config);
        layout.init().load(this._data);
        const msgbus = new message_1.default(this);
        msgbus.init();
    }
    destroy() {
        this._layout.destroy();
    }
    setCell(id, row, col, value) {
        console.log(`${id} new value "${value}" saved.`);
        if (!this._data[row]) {
            this._data[row] = [];
        }
        this._data[row][col] = value;
    }
    get data() {
        return this._data;
    }
    set data(data) {
        this._data = data;
        if (this._layout) {
            this._layout.load(this._data);
            this._cell = null;
        }
    }
    get cell() {
        return this._cell;
    }
    set cell(cell) {
        this._cell = cell;
    }
    get column() {
        return this._column;
    }
    set column(column) {
        this._column = column;
    }
    get layout() {
        return this._layout;
    }
}
exports.default = Excel;
},{"./config/layout":1,"./module/message":5,"./view/layout":8}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const message_1 = require("../module/message");
class Cell {
    constructor(id) {
        this._edit = false;
        console.log(`Select cell: ${id}.`);
        this._id = id;
        this._row = parseInt(id.substr(1)) - 1;
        this._col = id.charCodeAt(0) - 65;
        this._cell = document.querySelector(`.excel-content td[data-id=${id}]`);
        this._value = this._cell.innerText;
    }
    get id() {
        return this._id;
    }
    addClass(className) {
        if (-1 == this._cell.className.indexOf(className)) {
            this._cell.className = this._cell.className ? this._cell.className + ` ${className}` : className;
        }
    }
    removeClass(className) {
        let clss = this._cell.className.split(' ');
        let ix = clss.indexOf(className);
        if (-1 < ix) {
            clss.splice(ix, 1);
            this._cell.className = clss.join(' ');
        }
    }
    triggerClass(className) {
        let clss = this._cell.className.split(' ');
        let ix = clss.indexOf(className);
        if (-1 < ix) {
            clss.splice(ix, 1);
            this._cell.className = clss.join(' ');
        }
        else {
            this._cell.className = this._cell.className ? this._cell.className + ` ${className}` : className;
        }
    }
    compute() {
        if (this._value != this._cell.innerText) {
            this._value = this._cell.innerText = eval(this._cell.innerText);
            const range = window.getSelection();
            range.selectAllChildren(this._cell);
            range.collapseToEnd();
        }
        return this;
    }
    edit() {
        this._edit = true;
        this._cell.setAttribute('contenteditable', 'true');
        return this;
    }
    focus() {
        this.addClass('on');
        return this;
    }
    blur() {
        if (this._edit) {
            this._edit = false;
            this._cell.setAttribute('contenteditable', 'false');
        }
        if (this._value != this._cell.innerText) {
            this._value = this._cell.innerText;
            message_1.emit('data', { cmd: 'update', id: this._id, row: this._row, col: this._col, value: this._value });
        }
        this.removeClass('on');
        return this;
    }
    blod() {
        this.triggerClass('strong');
        return this;
    }
    italic() {
        this.triggerClass('italic');
        return this;
    }
    align(align) {
        this.removeClass('left');
        this.removeClass('center');
        this.removeClass('right');
        this.triggerClass(align);
        return this;
    }
}
exports.default = Cell;
},{"../module/message":5}],4:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class Export {
    constructor(data) {
        this._data = data;
    }
    csv(fileName = '') {
        if (this._data instanceof Array == false) {
            throw '数据格式不正确，无法进行导出！';
        }
        let tmp = [];
        for (let row of this._data) {
            for (let cell of row) {
                tmp.push(`${cell || ''},`);
            }
            tmp.push('\n');
        }
        let uri = 'data:text/csv;charset=utf-8,\ufeff' + encodeURIComponent(tmp.join(''));
        let link = document.createElement('a');
        link.href = uri;
        link.download = `${fileName || new Date().getTime()}.csv`;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }
}
;
exports.default = Export;
},{}],5:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const cell_1 = require("./cell");
const export_1 = require("./export");
const sort_1 = require("./sort");
class MessageBus {
    constructor(app) {
        this._app = app;
    }
    init() {
        window.addEventListener('message', this.messageHandler.bind(this));
        return this;
    }
    destroy() {
        window.removeEventListener('message', this.messageHandler);
    }
    messageHandler(event) {
        if ('object' != typeof event || !event.data.hasOwnProperty('type') || 'messageBus' != event.data.type)
            return;
        switch (event.data.comp) {
            case 'toolsbar':
                this.toolsbarHandler(event.data);
                break;
            case 'column':
                this.columnHandler(event.data);
                break;
            case 'cell':
                this.cellHandler(event.data);
                break;
            case 'data':
                this.dataHandler(event.data);
                break;
        }
    }
    toolsbarHandler(data) {
        switch (data.cmd) {
            case 'save':
                new export_1.default(this._app.data).csv();
                break;
            case 'bold':
                if (this._app.cell)
                    this._app.cell.blod();
                break;
            case 'italic':
                if (this._app.cell)
                    this._app.cell.italic();
                break;
            case 'alignLeft':
                if (this._app.cell)
                    this._app.cell.align('left');
                break;
            case 'alignCenter':
                if (this._app.cell)
                    this._app.cell.align('center');
                break;
            case 'alignRight':
                if (this._app.cell)
                    this._app.cell.align('right');
                break;
            case 'columnAsc':
                var sort = new sort_1.default(this._app.data);
                this._app.data = sort.column(this._app.column, sort.ASC);
                break;
            case 'columnDesc':
                var sort = new sort_1.default(this._app.data);
                this._app.data = sort.column(this._app.column, sort.DESC);
                break;
        }
    }
    cellHandler(data) {
        if (this._app.cell && this._app.cell.id != data.id) {
            this._app.cell.blur();
            this._app.cell = null;
        }
        let cell = this._app.cell;
        if (!cell) {
            cell = this._app.cell = new cell_1.default(data.id);
        }
        switch (data.cmd) {
            case 'compute':
                cell.compute();
                break;
            case 'edit':
                cell.edit();
                break;
            case 'select':
                cell.focus();
                this._app.layout.footerbar.cellName = data.id;
                break;
        }
    }
    columnHandler(data) {
        switch (data.cmd) {
            case 'select':
                this._app.column = data.id;
                this._app.layout.footerbar.columnName = data.id;
                break;
        }
    }
    dataHandler(data) {
        switch (data.cmd) {
            case 'update':
                let { id, row, col, value } = data;
                this._app.setCell(id, row, col, value);
                break;
        }
    }
}
exports.MessageBus = MessageBus;
function emit(component, data) {
    window.postMessage(Object.assign(data, { type: 'messageBus', comp: component }), '*');
}
exports.emit = emit;
exports.default = MessageBus;
},{"./cell":3,"./export":4,"./sort":6}],6:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class Sort {
    constructor(data) {
        this.ASC = 1;
        this.DESC = 0;
        this._data = data;
    }
    column(columnName, asc = 1, passTitle = true) {
        let col = this.convIndexByColumn(columnName);
        let tas;
        const ascend = (col) => {
            return (a, b) => {
                if (isNaN(a[col]) && isNaN(b[col]))
                    return a[col] > b[col] ? 1 : -1;
                return a[col] - b[col];
            };
        };
        const descend = (col) => {
            return (a, b) => {
                if (isNaN(a[col]) && isNaN(b[col]))
                    return b[col] > a[col] ? 1 : -1;
                return b[col] - a[col];
            };
        };
        if (passTitle)
            tas = this._data.splice(0, 1);
        if (asc) {
            this._data.sort(ascend(col));
        }
        else {
            this._data.sort(descend(col));
        }
        if (passTitle && tas)
            this._data.unshift(...tas);
        return this._data;
    }
    convIndexByColumn(columnName) {
        return columnName.charCodeAt(0) - 65;
    }
}
exports.default = Sort;
},{}],7:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
class Footerbar {
    constructor(app, config = null) {
        this.app = app;
        this.content = app.querySelector('.excel-footbar');
        this._columnName = config.column.select || 'A';
    }
    init() {
        this.render();
        return this;
    }
    destroy() {
        this.content = null;
    }
    render() {
        this.content.innerHTML = `
            <span>排序列: <strong>${this._columnName}</strong></span>
            <span>已选单元格: <strong>${this._cellName || '未选择'}</strong></span>
        `;
    }
    set cellName(cellName) {
        this._cellName = cellName;
        this.render();
    }
    set columnName(columnName) {
        this._columnName = columnName;
        this.render();
    }
}
exports.default = Footerbar;
},{}],8:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const toolsbar_1 = require("./toolsbar");
const footerbar_1 = require("./footerbar");
const message_1 = require("../module/message");
class Layout {
    constructor(view, config) {
        this.view = view;
        this.config = config;
        this.row = config.grid.row || 200;
        this.col = config.grid.column || 26;
        this.app = document.createElement('div');
        this.app.id = 'app-excel';
        this.app.className = 'excel';
        this.app.innerHTML = template;
        this.content = this.app.querySelector('.excel-content');
    }
    init() {
        this.view.innerHTML = '';
        this.view.appendChild(this.app);
        const labelCol = this.app.querySelector('.excel-label--column');
        let labels = [];
        for (let i = 0; i < this.col; i++) {
            labels.push(`<span class="label">${String.fromCharCode(65 + i)}</span>`);
        }
        labelCol.innerHTML = labels.join('');
        const labelRow = this.app.querySelector('.excel-label--row');
        labels = [];
        for (let i = 0; i < this.row; i++) {
            labels.push(`<span class="label">${i + 1}</span>`);
        }
        labelRow.innerHTML = labels.join('');
        const toolsbar = this._toolsbar = new toolsbar_1.default(this.app, this.config);
        toolsbar.init().bindEvent();
        const footerbar = this._footerbar = new footerbar_1.default(this.app, this.config);
        footerbar.init();
        this.app.addEventListener('click', event.click, true);
        this.app.addEventListener('dblclick', event.dblclick, true);
        this.app.addEventListener('keyup', event.keyup, true);
        return this;
    }
    destroy() {
        this.app.removeEventListener('click', event.click, true);
        this.app.removeEventListener('dblclick', event.dblclick, true);
        this.app.removeEventListener('keyup', event.keyup, true);
    }
    load(data = []) {
        const tables = [];
        for (let r = 0; r < this.row; r++) {
            tables.push('<tr>');
            for (let c = 0; c < this.col; c++) {
                tables.push(`<td data-id="${String.fromCharCode(65 + c) + (r + 1)}">${data[r] && data[r][c] ? data[r][c] : ''}</td>`);
            }
            tables.push('</tr>');
        }
        this.content.innerHTML = tables.join('');
        return this;
    }
    get toolsbar() {
        return this._toolsbar;
    }
    get footerbar() {
        return this._footerbar;
    }
}
;
const template = `
    <div class="excel-toolbar"></div>
    <div class="excel-window">
        <div class="excel-label--column"></div>
        <div class="excel-panel">
            <div class="excel-label--row"></div>
            <table class="excel-content"></table>
        </div>
    </div>
    <div class="excel-footbar"></div>
`;
const event = {
    click(event) {
        switch (event.target.nodeName) {
            case 'TD':
                message_1.emit('cell', { cmd: 'select', id: event.target.dataset.id });
                break;
            case 'SPAN':
                let name = event.target.innerText;
                if (/^[A-Z]{1}$/.test(name)) {
                    message_1.emit('column', { cmd: 'select', id: name });
                }
                break;
        }
    },
    dblclick(event) {
        switch (event.target.nodeName) {
            case 'TD':
                message_1.emit('cell', { cmd: 'edit', id: event.target.dataset.id });
                break;
        }
    },
    keyup(event) {
        switch (event.target.nodeName) {
            case 'TD':
                if ('Enter' == event.key) {
                    message_1.emit('cell', { cmd: 'compute', id: event.target.dataset.id });
                }
                break;
        }
    },
};
exports.default = Layout;
},{"../module/message":5,"./footerbar":7,"./toolsbar":9}],9:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const message_1 = require("../module/message");
class Toolsbar {
    constructor(app, config) {
        this.app = app;
        this.config = config;
        this.buttons = config.buttons || {};
        this.content = app.querySelector('.excel-toolbar');
    }
    init() {
        const btns = [];
        for (let btn of this.buttons) {
            if ('|' === btn) {
                btns.push('<hr class="sp" />');
            }
            else {
                btns.push(`<button type="button" data-cmd="${btn.cmd}" ${btn.disabled ? 'disabled' : ''} class="excel-toolbar--btn">${btn.text}</button>`);
            }
        }
        this.content.innerHTML = btns.join('');
        return this;
    }
    bindEvent() {
        this.content.addEventListener('click', event.click, true);
        return this;
    }
    destroy() {
        this.content.removeEventListener('click', event.click, true);
        this.content = null;
    }
}
const event = {
    click(event) {
        if ('BUTTON' != event.target.nodeName)
            return;
        const cmd = event.target.dataset.cmd;
        switch (cmd) {
            default:
                message_1.emit('toolsbar', { cmd });
        }
    },
};
exports.default = Toolsbar;
},{"../module/message":5}]},{},[2])(2)
});

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzY3JpcHQvY29uZmlnL2xheW91dC50cyIsInNjcmlwdC9leGNlbC50cyIsInNjcmlwdC9tb2R1bGUvY2VsbC50cyIsInNjcmlwdC9tb2R1bGUvZXhwb3J0LnRzIiwic2NyaXB0L21vZHVsZS9tZXNzYWdlLnRzIiwic2NyaXB0L21vZHVsZS9zb3J0LnRzIiwic2NyaXB0L3ZpZXcvZm9vdGVyYmFyLnRzIiwic2NyaXB0L3ZpZXcvbGF5b3V0LnRzIiwic2NyaXB0L3ZpZXcvdG9vbHNiYXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLE1BQU0sTUFBTSxHQUFHO0lBQ1g7UUFDSSxHQUFHLEVBQU8sTUFBTTtRQUNoQixJQUFJLEVBQU0sSUFBSTtRQUNkLFFBQVEsRUFBRSxJQUFJO0tBQ2pCLEVBQUU7UUFDQyxHQUFHLEVBQU8sTUFBTTtRQUNoQixJQUFJLEVBQU0sSUFBSTtLQUNqQjtJQUNELEdBQUc7SUFDSDtRQUNJLEdBQUcsRUFBTyxNQUFNO1FBQ2hCLElBQUksRUFBTSxJQUFJO0tBQ2pCLEVBQUU7UUFDQyxHQUFHLEVBQU8sUUFBUTtRQUNsQixJQUFJLEVBQU0sSUFBSTtLQUNqQjtJQUNELEdBQUc7SUFDSDtRQUNJLEdBQUcsRUFBTyxXQUFXO1FBQ3JCLElBQUksRUFBTSxLQUFLO0tBQ2xCLEVBQUU7UUFDQyxHQUFHLEVBQU8sYUFBYTtRQUN2QixJQUFJLEVBQU0sSUFBSTtLQUNqQixFQUFFO1FBQ0MsR0FBRyxFQUFPLFlBQVk7UUFDdEIsSUFBSSxFQUFNLEtBQUs7S0FDbEI7SUFDRCxHQUFHO0lBQ0g7UUFDSSxHQUFHLEVBQU8sV0FBVztRQUNyQixJQUFJLEVBQU0sSUFBSTtLQUNqQixFQUFFO1FBQ0MsR0FBRyxFQUFPLFlBQVk7UUFDdEIsSUFBSSxFQUFNLElBQUk7S0FDakI7Q0FDSixDQUFDO0FBWU8sd0JBQU07QUFWZixNQUFNLElBQUksR0FBRztJQUNULEdBQUcsRUFBSyxHQUFHO0lBQ1gsTUFBTSxFQUFFLEVBQUU7Q0FDYixDQUFDO0FBT2Usb0JBQUk7QUFMckIsTUFBTSxNQUFNLEdBQUc7SUFDWCxNQUFNLEVBQUUsR0FBRztDQUNkLENBQUM7QUFHcUIsd0JBQU07QUFEN0Isa0JBQWUsTUFBTSxDQUFDOzs7O0FDL0N0Qiw0Q0FBcUc7QUFDckcsMENBQXVDO0FBQ3ZDLDhDQUEwQztBQVExQyxNQUFNLEtBQUs7SUFlUCxZQUFZLEtBQVksS0FBSyxFQUFFLE9BQVcsRUFBRTtRQVo1QyxXQUFNLEdBQU87WUFDVCxJQUFJLEVBQUssYUFBVTtZQUNuQixPQUFPLEVBQUUsZUFBWTtZQUNyQixNQUFNLEVBQUcsZUFBWTtTQUN4QixDQUFDO1FBU0UsSUFBSSxDQUFDLEVBQUUsR0FBUSxFQUFFLENBQUM7UUFDbEIsSUFBSSxDQUFDLElBQUksR0FBTSxRQUFRLENBQUMsY0FBYyxDQUFDLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQztRQUNuRCxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sSUFBSSxHQUFHLENBQUM7UUFDaEQsSUFBSSxDQUFDLEtBQUssR0FBSyxJQUFJLENBQUM7UUFFcEIsSUFBRyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUU7WUFDWCxPQUFPLENBQUMsS0FBSyxDQUFDLHVCQUF3QixFQUFHLHVEQUF1RCxDQUFDLENBQUM7WUFDbEcsTUFBTSxRQUFRLENBQUM7U0FDbEI7UUFNRCxVQUFVLENBQUMsR0FBRyxFQUFFO1lBQ1gsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ2pCLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNiLENBQUM7SUFHRCxJQUFJO1FBRUEsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLGdCQUFVLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDckUsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFHL0IsTUFBTSxNQUFNLEdBQUcsSUFBSSxpQkFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3BDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNsQixDQUFDO0lBRUQsT0FBTztRQUNILElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDM0IsQ0FBQztJQUVELE9BQU8sQ0FBQyxFQUFTLEVBQUUsR0FBVSxFQUFFLEdBQVUsRUFBRSxLQUFZO1FBQ25ELE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBSSxFQUFHLGVBQWdCLEtBQU0sVUFBVSxDQUFDLENBQUM7UUFDckQsSUFBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDakIsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7U0FDeEI7UUFDRCxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQztJQUNqQyxDQUFDO0lBR0QsSUFBVyxJQUFJO1FBQ1gsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3RCLENBQUM7SUFDRCxJQUFXLElBQUksQ0FBQyxJQUFzQjtRQUNsQyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztRQUNsQixJQUFHLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDYixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDOUIsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7U0FDckI7SUFDTCxDQUFDO0lBQ0QsSUFBVyxJQUFJO1FBQ1gsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3RCLENBQUM7SUFDRCxJQUFXLElBQUksQ0FBQyxJQUFTO1FBQ3JCLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO0lBQ3RCLENBQUM7SUFDRCxJQUFXLE1BQU07UUFDYixPQUFPLElBQUksQ0FBQyxPQUFPLENBQUM7SUFDeEIsQ0FBQztJQUNELElBQVcsTUFBTSxDQUFDLE1BQWE7UUFDM0IsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7SUFDMUIsQ0FBQztJQUNELElBQVcsTUFBTTtRQUNiLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztJQUN4QixDQUFDO0NBQ0o7QUFFRCxrQkFBZSxLQUFLLENBQUM7Ozs7QUNoR3JCLCtDQUF5QztBQU96QyxNQUFNLElBQUk7SUFRTixZQUFZLEVBQVM7UUFIYixVQUFLLEdBQVksS0FBSyxDQUFDO1FBSTlCLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0JBQWlCLEVBQUcsR0FBRyxDQUFDLENBQUM7UUFDbEMsSUFBSSxDQUFDLEdBQUcsR0FBSyxFQUFFLENBQUM7UUFDaEIsSUFBSSxDQUFDLElBQUksR0FBSSxRQUFRLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN4QyxJQUFJLENBQUMsSUFBSSxHQUFJLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ25DLElBQUksQ0FBQyxLQUFLLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyw2QkFBOEIsRUFBRyxHQUFHLENBQUMsQ0FBQztRQUMxRSxJQUFJLENBQUMsTUFBTSxHQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDO0lBQ3RDLENBQUM7SUFFRCxJQUFXLEVBQUU7UUFDVCxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUM7SUFDcEIsQ0FBQztJQUVPLFFBQVEsQ0FBQyxTQUFnQjtRQUNoQyxJQUFHLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsRUFBRTtZQUNqRCxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUUsSUFBSyxTQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO1NBQ2xHO0lBQ0YsQ0FBQztJQUVPLFdBQVcsQ0FBQyxTQUFnQjtRQUNuQyxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDM0MsSUFBSSxFQUFFLEdBQUssSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUNuQyxJQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRTtZQUNYLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ25CLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDdEM7SUFDRixDQUFDO0lBRU8sWUFBWSxDQUFDLFNBQWdCO1FBQ3BDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUMzQyxJQUFJLEVBQUUsR0FBSyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ25DLElBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFO1lBQ1gsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDbkIsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztTQUN0QzthQUFLO1lBQ0wsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFFLElBQUssU0FBVSxFQUFFLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztTQUNsRztJQUNGLENBQUM7SUFFRCxPQUFPO1FBQ04sSUFBRyxJQUFJLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxFQUFFO1lBQ3ZDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDaEUsTUFBTSxLQUFLLEdBQUcsTUFBTSxDQUFDLFlBQVksRUFBRSxDQUFDO1lBQ2pDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDcEMsS0FBSyxDQUFDLGFBQWEsRUFBRSxDQUFDO1NBQ3pCO1FBQ0QsT0FBTyxJQUFJLENBQUM7SUFDYixDQUFDO0lBRUQsSUFBSTtRQUNILElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO1FBQ2xCLElBQUksQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLGlCQUFpQixFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ25ELE9BQU8sSUFBSSxDQUFDO0lBQ2IsQ0FBQztJQUVELEtBQUs7UUFDSixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3BCLE9BQU8sSUFBSSxDQUFDO0lBQ2IsQ0FBQztJQUVELElBQUk7UUFDSCxJQUFHLElBQUksQ0FBQyxLQUFLLEVBQUU7WUFDZCxJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztZQUNuQixJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxpQkFBaUIsRUFBRSxPQUFPLENBQUMsQ0FBQztTQUNwRDtRQUVELElBQUcsSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBRTtZQUN2QyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDO1lBQ25DLGNBQUksQ0FBQyxNQUFNLEVBQUUsRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztTQUNsRztRQUNELElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdkIsT0FBTyxJQUFJLENBQUM7SUFDYixDQUFDO0lBRUQsSUFBSTtRQUNILElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDNUIsT0FBTyxJQUFJLENBQUM7SUFDYixDQUFDO0lBRUQsTUFBTTtRQUNMLElBQUksQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDNUIsT0FBTyxJQUFJLENBQUM7SUFDYixDQUFDO0lBRUQsS0FBSyxDQUFDLEtBQVk7UUFDakIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN6QixJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzNCLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDMUIsSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN6QixPQUFPLElBQUksQ0FBQztJQUNiLENBQUM7Q0FDSjtBQUVELGtCQUFlLElBQUksQ0FBQzs7OztBQ3ZHcEIsTUFBTSxNQUFNO0lBR1IsWUFBWSxJQUFzQjtRQUM5QixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztJQUN0QixDQUFDO0lBRUQsR0FBRyxDQUFDLFdBQWtCLEVBQUU7UUFDcEIsSUFBRyxJQUFJLENBQUMsS0FBSyxZQUFZLEtBQUssSUFBSSxLQUFLLEVBQUU7WUFDckMsTUFBTSxpQkFBaUIsQ0FBQztTQUMzQjtRQUNELElBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQztRQUNiLEtBQUksSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLEtBQUssRUFBRTtZQUN2QixLQUFJLElBQUksSUFBSSxJQUFJLEdBQUcsRUFBRTtnQkFHakIsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFJLElBQUksSUFBSSxFQUFHLEdBQUcsQ0FBQyxDQUFDO2FBQ2hDO1lBQ0QsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUNsQjtRQUNELElBQUksR0FBRyxHQUFTLG9DQUFvQyxHQUFHLGtCQUFrQixDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN4RixJQUFJLElBQUksR0FBUSxRQUFRLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzVDLElBQUksQ0FBQyxJQUFJLEdBQU8sR0FBRyxDQUFDO1FBQ3BCLElBQUksQ0FBQyxRQUFRLEdBQUcsR0FBSSxRQUFRLElBQUksSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUcsTUFBTSxDQUFDO1FBQzVELFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNiLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3BDLENBQUM7Q0FDSjtBQUFBLENBQUM7QUFFRixrQkFBZSxNQUFNLENBQUM7Ozs7QUNuQ3RCLGlDQUEwQjtBQUMxQixxQ0FBOEI7QUFDOUIsaUNBQTBCO0FBTzFCLE1BQU0sVUFBVTtJQUdaLFlBQVksR0FBTztRQUNmLElBQUksQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDO0lBQ3BCLENBQUM7SUFFRCxJQUFJO1FBQ0EsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBRW5FLE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFFRCxPQUFPO1FBQ0gsTUFBTSxDQUFDLG1CQUFtQixDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7SUFDL0QsQ0FBQztJQUVPLGNBQWMsQ0FBQyxLQUFTO1FBQzVCLElBQUcsUUFBUSxJQUFJLE9BQU8sS0FBSyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLElBQUksWUFBWSxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSTtZQUFFLE9BQU87UUFFN0csUUFBTyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRTtZQUN2QixLQUFLLFVBQVU7Z0JBQ2QsSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ2pDLE1BQU07WUFFSixLQUFLLFFBQVE7Z0JBQ1QsSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQy9CLE1BQU07WUFFYixLQUFLLE1BQU07Z0JBQ1YsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQzdCLE1BQU07WUFFSixLQUFLLE1BQU07Z0JBQ1AsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQzdCLE1BQU07U0FDYjtJQUNMLENBQUM7SUFFTyxlQUFlLENBQUMsSUFBUTtRQUMvQixRQUFPLElBQUksQ0FBQyxHQUFHLEVBQUU7WUFDYixLQUFLLE1BQU07Z0JBQ1YsSUFBSSxnQkFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7Z0JBQ2pDLE1BQU07WUFFUCxLQUFLLE1BQU07Z0JBQ1YsSUFBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7b0JBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBQ3pDLE1BQU07WUFFUCxLQUFLLFFBQVE7Z0JBQ1osSUFBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7b0JBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7Z0JBQzNDLE1BQU07WUFFUCxLQUFLLFdBQVc7Z0JBQ2YsSUFBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7b0JBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2dCQUNoRCxNQUFNO1lBRVAsS0FBSyxhQUFhO2dCQUNqQixJQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSTtvQkFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQ2xELE1BQU07WUFFUCxLQUFLLFlBQVk7Z0JBQ2hCLElBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJO29CQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztnQkFDakQsTUFBTTtZQUVKLEtBQUssV0FBVztnQkFDWixJQUFJLElBQUksR0FBRyxJQUFJLGNBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNwQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztnQkFDekQsTUFBTTtZQUVWLEtBQUssWUFBWTtnQkFDYixJQUFJLElBQUksR0FBRyxJQUFJLGNBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNwQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDMUQsTUFBTTtTQUNiO0lBQ0wsQ0FBQztJQUVPLFdBQVcsQ0FBQyxJQUFRO1FBQzNCLElBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLElBQUksQ0FBQyxFQUFFLEVBQUU7WUFDbEQsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDdEIsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1NBQ3RCO1FBQ0QsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDMUIsSUFBRyxDQUFDLElBQUksRUFBRTtZQUNOLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLGNBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDN0M7UUFFRCxRQUFPLElBQUksQ0FBQyxHQUFHLEVBQUU7WUFDVixLQUFLLFNBQVM7Z0JBQ1YsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO2dCQUNmLE1BQU07WUFFYixLQUFLLE1BQU07Z0JBQ1YsSUFBSSxDQUFDLElBQUksRUFBRSxDQUFDO2dCQUNaLE1BQU07WUFFSixLQUFLLFFBQVE7Z0JBQ1QsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUNiLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQztnQkFDOUMsTUFBTTtTQUNiO0lBQ0wsQ0FBQztJQUVPLGFBQWEsQ0FBQyxJQUFRO1FBQzFCLFFBQU8sSUFBSSxDQUFDLEdBQUcsRUFBRTtZQUNiLEtBQUssUUFBUTtnQkFDVCxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDO2dCQUMzQixJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUM7Z0JBQ2hELE1BQU07U0FDYjtJQUNMLENBQUM7SUFFTyxXQUFXLENBQUMsSUFBUTtRQUN4QixRQUFPLElBQUksQ0FBQyxHQUFHLEVBQUU7WUFDYixLQUFLLFFBQVE7Z0JBQ1QsSUFBSSxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxHQUFHLElBQUksQ0FBQztnQkFDbkMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7Z0JBQ3ZDLE1BQU07U0FDYjtJQUNMLENBQUM7Q0FDSjtBQU9RLGdDQUFVO0FBTG5CLFNBQVMsSUFBSSxDQUFDLFNBQWdCLEVBQUUsSUFBUTtJQUN2QyxNQUFNLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUN2RixDQUFDO0FBR29CLG9CQUFJO0FBRHpCLGtCQUFlLFVBQVUsQ0FBQzs7OztBQ3ZJMUIsTUFBTSxJQUFJO0lBTU4sWUFBWSxJQUFRO1FBTGQsUUFBRyxHQUFJLENBQUMsQ0FBQztRQUNULFNBQUksR0FBRyxDQUFDLENBQUM7UUFLWCxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztJQUN0QixDQUFDO0lBRUQsTUFBTSxDQUFDLFVBQWlCLEVBQUUsTUFBYSxDQUFDLEVBQUUsWUFBb0IsSUFBSTtRQUNqRSxJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDMUMsSUFBSSxHQUFPLENBQUM7UUFFZixNQUFNLE1BQU0sR0FBRyxDQUFDLEdBQVUsRUFBRSxFQUFFO1lBQ3ZCLE9BQU8sQ0FBQyxDQUFLLEVBQUUsQ0FBSyxFQUFFLEVBQUU7Z0JBQ3BCLElBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQUUsT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUN6RSxPQUFPLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDckIsQ0FBQyxDQUFBO1FBQ1gsQ0FBQyxDQUFBO1FBQ0QsTUFBTSxPQUFPLEdBQUcsQ0FBQyxHQUFVLEVBQUUsRUFBRTtZQUNyQixPQUFPLENBQUMsQ0FBSyxFQUFFLENBQUssRUFBRSxFQUFFO2dCQUNwQixJQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQUFFLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDekUsT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3JCLENBQUMsQ0FBQTtRQUNYLENBQUMsQ0FBQTtRQUVLLElBQUcsU0FBUztZQUFFLEdBQUcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDbEQsSUFBRyxHQUFHLEVBQUU7WUFDUCxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztTQUM3QjthQUFLO1lBQ0wsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7U0FDOUI7UUFDSyxJQUFHLFNBQVMsSUFBSSxHQUFHO1lBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQztRQUVuRCxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDbkIsQ0FBQztJQUVPLGlCQUFpQixDQUFDLFVBQWlCO1FBQzFDLE9BQU8sVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDdEMsQ0FBQztDQUNKO0FBRUQsa0JBQWUsSUFBSSxDQUFDOzs7O0FDcENwQixNQUFNLFNBQVM7SUFPWCxZQUFZLEdBQU8sRUFBRSxTQUFhLElBQUk7UUFDeEMsSUFBSSxDQUFDLEdBQUcsR0FBTyxHQUFHLENBQUM7UUFDbkIsSUFBSSxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUMsYUFBYSxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDN0MsSUFBSSxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sSUFBSSxHQUFHLENBQUM7SUFDbkQsQ0FBQztJQUVELElBQUk7UUFDQSxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDZCxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRUQsT0FBTztRQUNOLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO0lBQ3JCLENBQUM7SUFFTyxNQUFNO1FBQ1YsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUc7aUNBQ0MsSUFBSSxDQUFDLFdBQVk7bUNBQ2YsSUFBSSxDQUFDLFNBQVMsSUFBSSxLQUFNO1NBQ25ELENBQUM7SUFDTixDQUFDO0lBRUQsSUFBVyxRQUFRLENBQUMsUUFBZTtRQUMvQixJQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQztRQUMxQixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDbEIsQ0FBQztJQUNELElBQVcsVUFBVSxDQUFDLFVBQWlCO1FBQ25DLElBQUksQ0FBQyxXQUFXLEdBQUcsVUFBVSxDQUFDO1FBQzlCLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztJQUNsQixDQUFDO0NBQ0o7QUFFRCxrQkFBZSxTQUFTLENBQUM7Ozs7QUM5Q3pCLHlDQUFrQztBQUNsQywyQ0FBb0M7QUFDcEMsK0NBQXlDO0FBT3pDLE1BQU0sTUFBTTtJQVdSLFlBQVksSUFBUSxFQUFFLE1BQVU7UUFDNUIsSUFBSSxDQUFDLElBQUksR0FBSyxJQUFJLENBQUM7UUFDbkIsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFFckIsSUFBSSxDQUFDLEdBQUcsR0FBTSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUM7UUFDckMsSUFBSSxDQUFDLEdBQUcsR0FBTSxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxFQUFFLENBQUM7UUFDdkMsSUFBSSxDQUFDLEdBQUcsR0FBTSxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzVDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLFdBQVcsQ0FBQztRQUMxQixJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsR0FBSSxPQUFPLENBQUM7UUFDOUIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEdBQUksUUFBUSxDQUFDO1FBQy9CLElBQUksQ0FBQyxPQUFPLEdBQVUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUNuRSxDQUFDO0lBRUQsSUFBSTtRQUNBLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztRQUN6QixJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFHaEMsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsc0JBQXNCLENBQUMsQ0FBQztRQUNoRSxJQUFJLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFDaEIsS0FBSSxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDOUIsTUFBTSxDQUFDLElBQUksQ0FBQyx1QkFBd0IsTUFBTSxDQUFDLFlBQVksQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFFLFNBQVMsQ0FBQyxDQUFDO1NBQzlFO1FBQ0QsUUFBUSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBR3JDLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLG1CQUFtQixDQUFDLENBQUM7UUFDN0QsTUFBTSxHQUFHLEVBQUUsQ0FBQztRQUNaLEtBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQzlCLE1BQU0sQ0FBQyxJQUFJLENBQUMsdUJBQXdCLENBQUMsR0FBRyxDQUFFLFNBQVMsQ0FBQyxDQUFDO1NBQ3hEO1FBQ0QsUUFBUSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBR3JDLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxrQkFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3RFLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQztRQUc1QixNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksbUJBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN6RSxTQUFTLENBQUMsSUFBSSxFQUFFLENBQUM7UUFHakIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztRQUN0RCxJQUFJLENBQUMsR0FBRyxDQUFDLGdCQUFnQixDQUFDLFVBQVUsRUFBRSxLQUFLLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQzVELElBQUksQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLEtBQUssQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFFdEQsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQztJQUVELE9BQU87UUFDSCxJQUFJLENBQUMsR0FBRyxDQUFDLG1CQUFtQixDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3pELElBQUksQ0FBQyxHQUFHLENBQUMsbUJBQW1CLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDL0QsSUFBSSxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztJQUM3RCxDQUFDO0lBRUQsSUFBSSxDQUFDLE9BQVcsRUFBRTtRQUNkLE1BQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQztRQUNsQixLQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUM5QixNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3BCLEtBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUM5QixNQUFNLENBQUMsSUFBSSxDQUFDLGdCQUFpQixNQUFNLENBQUMsWUFBWSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUUsS0FBTSxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUcsT0FBTyxDQUFDLENBQUM7YUFDM0g7WUFDRCxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQ3hCO1FBQ0QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUV6QyxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBRUQsSUFBVyxRQUFRO1FBQ2YsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQzFCLENBQUM7SUFDRCxJQUFXLFNBQVM7UUFDaEIsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQzNCLENBQUM7Q0FDSjtBQUFBLENBQUM7QUFFRixNQUFNLFFBQVEsR0FBRzs7Ozs7Ozs7OztDQVVoQixDQUFDO0FBRUYsTUFBTSxLQUFLLEdBQUc7SUFDVixLQUFLLENBQUMsS0FBUztRQUNYLFFBQU8sS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUU7WUFDMUIsS0FBSyxJQUFJO2dCQUNMLGNBQUksQ0FBQyxNQUFNLEVBQUUsRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO2dCQUM3RCxNQUFNO1lBRVYsS0FBSyxNQUFNO2dCQUNQLElBQUksSUFBSSxHQUFVLEtBQUssQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDO2dCQUN6QyxJQUFHLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUU7b0JBQ3hCLGNBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO2lCQUMvQztnQkFDRCxNQUFNO1NBQ2I7SUFDTCxDQUFDO0lBQ0QsUUFBUSxDQUFDLEtBQVM7UUFDZCxRQUFPLEtBQUssQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFO1lBQzFCLEtBQUssSUFBSTtnQkFDTCxjQUFJLENBQUMsTUFBTSxFQUFFLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsS0FBSyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztnQkFDM0QsTUFBTTtTQUNiO0lBQ0wsQ0FBQztJQUNELEtBQUssQ0FBQyxLQUFTO1FBQ1gsUUFBTyxLQUFLLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRTtZQUMxQixLQUFLLElBQUk7Z0JBQ0wsSUFBRyxPQUFPLElBQUksS0FBSyxDQUFDLEdBQUcsRUFBRTtvQkFDckIsY0FBSSxDQUFDLE1BQU0sRUFBRSxFQUFFLEdBQUcsRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFLEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7aUJBQ2pFO2dCQUNELE1BQU07U0FDYjtJQUNMLENBQUM7Q0FDSixDQUFDO0FBRUYsa0JBQWUsTUFBTSxDQUFDOzs7O0FDOUl0QiwrQ0FBeUM7QUFPekMsTUFBTSxRQUFRO0lBTVYsWUFBWSxHQUFPLEVBQUUsTUFBVTtRQUNqQyxJQUFJLENBQUMsR0FBRyxHQUFPLEdBQUcsQ0FBQztRQUNuQixJQUFJLENBQUMsTUFBTSxHQUFJLE1BQU0sQ0FBQztRQUN0QixJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxPQUFPLElBQUksRUFBRSxDQUFDO1FBQ3BDLElBQUksQ0FBQyxPQUFPLEdBQUcsR0FBRyxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ2pELENBQUM7SUFFRCxJQUFJO1FBQ0gsTUFBTSxJQUFJLEdBQUcsRUFBRSxDQUFDO1FBQ2hCLEtBQUksSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLE9BQU8sRUFBRTtZQUM1QixJQUFHLEdBQUcsS0FBSyxHQUFHLEVBQUU7Z0JBQ2YsSUFBSSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO2FBQy9CO2lCQUFLO2dCQUNMLElBQUksQ0FBQyxJQUFJLENBQUMsbUNBQW9DLEdBQUcsQ0FBQyxHQUFJLEtBQU0sR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFHLCtCQUFnQyxHQUFHLENBQUMsSUFBSyxXQUFXLENBQUMsQ0FBQzthQUNqSjtTQUNEO1FBQ0QsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUV2QyxPQUFPLElBQUksQ0FBQztJQUNiLENBQUM7SUFFRCxTQUFTO1FBQ1IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztRQUUxRCxPQUFPLElBQUksQ0FBQztJQUNiLENBQUM7SUFFRCxPQUFPO1FBQ04sSUFBSSxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztRQUM3RCxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztJQUNyQixDQUFDO0NBQ0o7QUFFRCxNQUFNLEtBQUssR0FBRztJQUNWLEtBQUssQ0FBQyxLQUFTO1FBQ1gsSUFBRyxRQUFRLElBQUksS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFRO1lBQUUsT0FBTztRQUM3QyxNQUFNLEdBQUcsR0FBVSxLQUFLLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUM7UUFDNUMsUUFBTyxHQUFHLEVBQUU7WUFDUjtnQkFDSSxjQUFJLENBQUMsVUFBVSxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztTQUNqQztJQUNMLENBQUM7Q0FDSixDQUFDO0FBRUYsa0JBQWUsUUFBUSxDQUFDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiY29uc3QgYnV0dG9uID0gW1xyXG4gICAge1xyXG4gICAgICAgIGNtZCAgICAgOiAnb3BlbicsXHJcbiAgICAgICAgdGV4dCAgICA6ICfmiZPlvIAnLFxyXG4gICAgICAgIGRpc2FibGVkOiB0cnVlLFxyXG4gICAgfSwge1xyXG4gICAgICAgIGNtZCAgICAgOiAnc2F2ZScsXHJcbiAgICAgICAgdGV4dCAgICA6ICfkv53lrZgnLFxyXG4gICAgfSxcclxuICAgICd8JywgLy8g5YiG6ZqU56ymXHJcbiAgICB7XHJcbiAgICAgICAgY21kICAgICA6ICdib2xkJyxcclxuICAgICAgICB0ZXh0ICAgIDogJ+WKoOeylycsXHJcbiAgICB9LCB7XHJcbiAgICAgICAgY21kICAgICA6ICdpdGFsaWMnLFxyXG4gICAgICAgIHRleHQgICAgOiAn5YC+5pacJyxcclxuICAgIH0sXHJcbiAgICAnfCcsIC8vIOWIhumalOesplxyXG4gICAge1xyXG4gICAgICAgIGNtZCAgICAgOiAnYWxpZ25MZWZ0JyxcclxuICAgICAgICB0ZXh0ICAgIDogJ+W3puWvuem9kCcsXHJcbiAgICB9LCB7XHJcbiAgICAgICAgY21kICAgICA6ICdhbGlnbkNlbnRlcicsXHJcbiAgICAgICAgdGV4dCAgICA6ICflsYXkuK0nLFxyXG4gICAgfSwge1xyXG4gICAgICAgIGNtZCAgICAgOiAnYWxpZ25SaWdodCcsXHJcbiAgICAgICAgdGV4dCAgICA6ICflj7Plr7npvZAnLFxyXG4gICAgfSxcclxuICAgICd8JywgLy8g5YiG6ZqU56ymXHJcbiAgICB7XHJcbiAgICAgICAgY21kICAgICA6ICdjb2x1bW5Bc2MnLFxyXG4gICAgICAgIHRleHQgICAgOiAn5q2j5bqPJyxcclxuICAgIH0sIHtcclxuICAgICAgICBjbWQgICAgIDogJ2NvbHVtbkRlc2MnLFxyXG4gICAgICAgIHRleHQgICAgOiAn5YCS5bqPJyxcclxuICAgIH0sXHJcbl07XHJcblxyXG5jb25zdCBncmlkID0ge1xyXG4gICAgcm93ICAgOiAyMDAsXHJcbiAgICBjb2x1bW46IDI2LFxyXG59O1xyXG5cclxuY29uc3QgY29sdW1uID0ge1xyXG4gICAgc2VsZWN0OiAnQScsXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBidXR0b247XHJcbmV4cG9ydCB7IGJ1dHRvbiwgZ3JpZCwgY29sdW1uIH07IiwiaW1wb3J0IHsgYnV0dG9uIGFzIGNvbmZpZ0J1dHRvbiwgZ3JpZCBhcyBjb25maWdHcmlkLCBjb2x1bW4gYXMgY29uZmlnQ29sdW1uIH0gZnJvbSAnLi9jb25maWcvbGF5b3V0JztcclxuaW1wb3J0IFZpZXdMYXlvdXQgZnJvbSAnLi92aWV3L2xheW91dCc7XHJcbmltcG9ydCBNZXNzYWdlQnVzIGZyb20gJy4vbW9kdWxlL21lc3NhZ2UnO1xyXG5pbXBvcnQgQ2VsbCBmcm9tICcuL21vZHVsZS9jZWxsJztcclxuXHJcbi8qKlxyXG4gKiBFeGNlbCBkZW1vIHdlYiBhcHAgY29kZVxyXG4gKiBAYXV0aG9yICBBbGV4XHJcbiAqIEB2ZXJzaW9uIDIwMTkwNzI1XHJcbiAqL1xyXG5jbGFzcyBFeGNlbCB7XHJcbiAgICBpZCAgICA6c3RyaW5nO1xyXG4gICAgdmlldyAgOmFueTtcclxuICAgIGNvbmZpZzphbnkgPSB7XHJcbiAgICAgICAgZ3JpZCAgIDogY29uZmlnR3JpZCxcclxuICAgICAgICBidXR0b25zOiBjb25maWdCdXR0b24sXHJcbiAgICAgICAgY29sdW1uIDogY29uZmlnQ29sdW1uLFxyXG4gICAgfTtcclxuXHJcbiAgICBwcml2YXRlIF9jb2x1bW46c3RyaW5nOyAvLyDlvZPliY3miYDpgInliJflkI3np7Ao5o6S5bqP55SoKVxyXG4gICAgcHJpdmF0ZSBfY2VsbCAgOkNlbGw7ICAgLy8g5b2T5YmN6YCJ5a6a5Y2V5YWD5qC8XHJcbiAgICBwcml2YXRlIF9kYXRhICA6QXJyYXk8QXJyYXk8YW55Pj47IC8vIOaVsOaNrlxyXG4gICAgcHJpdmF0ZSBfbGF5b3V0OmFueTsgICAgLy8g5biD5bGA5a+56LGhXHJcbiAgICBwcml2YXRlIF9yYW5nZSA6W3N0cmluZywgc3RyaW5nXTsgLy8g5pqC5pyq5L2/55SoXHJcblxyXG4gICAgY29uc3RydWN0b3IoaWQ6c3RyaW5nID0gJ2FwcCcsIGRhdGE6YW55ID0gW10pIHtcclxuICAgICAgICB0aGlzLmlkICAgICAgPSBpZDtcclxuICAgICAgICB0aGlzLnZpZXcgICAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkgfHwgbnVsbDtcclxuICAgICAgICB0aGlzLl9jb2x1bW4gPSB0aGlzLmNvbmZpZy5jb2x1bW4uc2VsZWN0IHx8ICdBJztcclxuICAgICAgICB0aGlzLl9kYXRhICAgPSBkYXRhO1xyXG5cclxuICAgICAgICBpZighdGhpcy52aWV3KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFRoZSBlbGVtZW50IHdpdGggSUQgJHsgaWQgfSBkaWQgbm90IGZpbmQgdGhlIHZpZXcgdGhhdCBjb3VsZCBub3QgYmUgaW5pdGlhbGl6ZWQuYCk7XHJcbiAgICAgICAgICAgIHRocm93ICfliJ3lp4vljJblpLHotKXvvIEnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8g5Y+R5biD54mI5pys5pS+5byAXHJcbiAgICAgICAgLy8gdGhpcy5pbml0KCk7XHJcblxyXG4gICAgICAgIC8vIERlbW/niYjmnKzmlL7lvIAg5bGV56S6TG9hZGluZ+aViOaenCDlu7bov58x56eS5Yid5aeL5YyWXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgICAgICB9LCAxMDAwKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiBNZXRob2RzICovXHJcbiAgICBpbml0KCkge1xyXG4gICAgICAgIC8vIOWIneWni+WMluW4g+WxgFxyXG4gICAgICAgIGNvbnN0IGxheW91dCA9IHRoaXMuX2xheW91dCA9IG5ldyBWaWV3TGF5b3V0KHRoaXMudmlldywgdGhpcy5jb25maWcpO1xyXG4gICAgICAgIGxheW91dC5pbml0KCkubG9hZCh0aGlzLl9kYXRhKTtcclxuXHJcbiAgICAgICAgLy8g5Yid5aeL5YyW5raI5oGv5oC757q/XHJcbiAgICAgICAgY29uc3QgbXNnYnVzID0gbmV3IE1lc3NhZ2VCdXModGhpcyk7XHJcbiAgICAgICAgbXNnYnVzLmluaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBkZXN0cm95KCkge1xyXG4gICAgICAgIHRoaXMuX2xheW91dC5kZXN0cm95KCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q2VsbChpZDpzdHJpbmcsIHJvdzpudW1iZXIsIGNvbDpudW1iZXIsIHZhbHVlOnN0cmluZykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGAkeyBpZCB9IG5ldyB2YWx1ZSBcIiR7IHZhbHVlIH1cIiBzYXZlZC5gKTtcclxuICAgICAgICBpZighdGhpcy5fZGF0YVtyb3ddKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RhdGFbcm93XSA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9kYXRhW3Jvd11bY29sXSA9IHZhbHVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIEdldHRlciAmIFNldHRlciAqL1xyXG4gICAgcHVibGljIGdldCBkYXRhKCk6QXJyYXk8QXJyYXk8YW55Pj4ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRhO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBkYXRhKGRhdGE6QXJyYXk8QXJyYXk8YW55Pj4pIHtcclxuICAgICAgICB0aGlzLl9kYXRhID0gZGF0YTtcclxuICAgICAgICBpZih0aGlzLl9sYXlvdXQpIHtcclxuICAgICAgICAgICAgdGhpcy5fbGF5b3V0LmxvYWQodGhpcy5fZGF0YSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NlbGwgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXQgY2VsbCgpOkNlbGwge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jZWxsO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldCBjZWxsKGNlbGw6Q2VsbCkge1xyXG4gICAgICAgIHRoaXMuX2NlbGwgPSBjZWxsO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldCBjb2x1bW4oKTpzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb2x1bW47XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0IGNvbHVtbihjb2x1bW46c3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fY29sdW1uID0gY29sdW1uO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGdldCBsYXlvdXQoKTpDZWxsIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbGF5b3V0O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBFeGNlbDsiLCJpbXBvcnQgeyBlbWl0IH0gZnJvbSAnLi4vbW9kdWxlL21lc3NhZ2UnO1xyXG5cclxuLyoqXHJcbiAqIE1vZHVsZSBDZWxsXHJcbiAqIEBhdXRob3IgIEFsZXhcclxuICogQHZlcnNpb24gMjAxOTA3MjVcclxuICovXHJcbmNsYXNzIENlbGwge1xyXG4gICAgcHJpdmF0ZSBfaWQgICA6c3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBfcm93ICA6bnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfY29sICA6bnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBfY2VsbCA6YW55O1xyXG4gICAgcHJpdmF0ZSBfZWRpdCA6Ym9vbGVhbiA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSBfdmFsdWU6c3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGlkOnN0cmluZykge1xyXG4gICAgXHRjb25zb2xlLmxvZyhgU2VsZWN0IGNlbGw6ICR7IGlkIH0uYCk7XHJcbiAgICAgICAgdGhpcy5faWQgICA9IGlkO1xyXG4gICAgICAgIHRoaXMuX3JvdyAgPSBwYXJzZUludChpZC5zdWJzdHIoMSkpIC0gMTtcclxuICAgICAgICB0aGlzLl9jb2wgID0gaWQuY2hhckNvZGVBdCgwKSAtIDY1O1xyXG4gICAgICAgIHRoaXMuX2NlbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuZXhjZWwtY29udGVudCB0ZFtkYXRhLWlkPSR7IGlkIH1dYCk7XHJcbiAgICAgICAgdGhpcy5fdmFsdWU9IHRoaXMuX2NlbGwuaW5uZXJUZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgaWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lkO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRkQ2xhc3MoY2xhc3NOYW1lOnN0cmluZykge1xyXG4gICAgXHRpZigtMSA9PSB0aGlzLl9jZWxsLmNsYXNzTmFtZS5pbmRleE9mKGNsYXNzTmFtZSkpIHtcclxuICAgIFx0XHR0aGlzLl9jZWxsLmNsYXNzTmFtZSA9IHRoaXMuX2NlbGwuY2xhc3NOYW1lID8gdGhpcy5fY2VsbC5jbGFzc05hbWUgK2AgJHsgY2xhc3NOYW1lIH1gIDogY2xhc3NOYW1lO1xyXG4gICAgXHR9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW1vdmVDbGFzcyhjbGFzc05hbWU6c3RyaW5nKSB7XHJcbiAgICBcdGxldCBjbHNzID0gdGhpcy5fY2VsbC5jbGFzc05hbWUuc3BsaXQoJyAnKTtcclxuICAgIFx0bGV0IGl4ICAgPSBjbHNzLmluZGV4T2YoY2xhc3NOYW1lKTtcclxuICAgIFx0aWYoLTEgPCBpeCkge1xyXG4gICAgXHRcdGNsc3Muc3BsaWNlKGl4LCAxKTtcclxuICAgIFx0XHR0aGlzLl9jZWxsLmNsYXNzTmFtZSA9IGNsc3Muam9pbignICcpO1xyXG4gICAgXHR9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB0cmlnZ2VyQ2xhc3MoY2xhc3NOYW1lOnN0cmluZykge1xyXG4gICAgXHRsZXQgY2xzcyA9IHRoaXMuX2NlbGwuY2xhc3NOYW1lLnNwbGl0KCcgJyk7XHJcbiAgICBcdGxldCBpeCAgID0gY2xzcy5pbmRleE9mKGNsYXNzTmFtZSk7XHJcbiAgICBcdGlmKC0xIDwgaXgpIHtcclxuICAgIFx0XHRjbHNzLnNwbGljZShpeCwgMSk7XHJcbiAgICBcdFx0dGhpcy5fY2VsbC5jbGFzc05hbWUgPSBjbHNzLmpvaW4oJyAnKTtcclxuICAgIFx0fWVsc2Uge1xyXG4gICAgXHRcdHRoaXMuX2NlbGwuY2xhc3NOYW1lID0gdGhpcy5fY2VsbC5jbGFzc05hbWUgPyB0aGlzLl9jZWxsLmNsYXNzTmFtZSArYCAkeyBjbGFzc05hbWUgfWAgOiBjbGFzc05hbWU7XHJcbiAgICBcdH1cclxuICAgIH1cclxuXHJcbiAgICBjb21wdXRlKCkge1xyXG4gICAgXHRpZih0aGlzLl92YWx1ZSAhPSB0aGlzLl9jZWxsLmlubmVyVGV4dCkge1xyXG4gICAgXHRcdHRoaXMuX3ZhbHVlID0gdGhpcy5fY2VsbC5pbm5lclRleHQgPSBldmFsKHRoaXMuX2NlbGwuaW5uZXJUZXh0KTtcclxuICAgIFx0XHRjb25zdCByYW5nZSA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcclxuICAgICAgICBcdHJhbmdlLnNlbGVjdEFsbENoaWxkcmVuKHRoaXMuX2NlbGwpO1xyXG4gICAgICAgIFx0cmFuZ2UuY29sbGFwc2VUb0VuZCgpO1xyXG4gICAgXHR9XHJcbiAgICBcdHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGVkaXQoKSB7XHJcbiAgICBcdHRoaXMuX2VkaXQgPSB0cnVlO1xyXG4gICAgXHR0aGlzLl9jZWxsLnNldEF0dHJpYnV0ZSgnY29udGVudGVkaXRhYmxlJywgJ3RydWUnKTtcclxuICAgIFx0cmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgZm9jdXMoKSB7XHJcbiAgICBcdHRoaXMuYWRkQ2xhc3MoJ29uJyk7XHJcbiAgICBcdHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGJsdXIoKSB7XHJcbiAgICBcdGlmKHRoaXMuX2VkaXQpIHtcclxuICAgIFx0XHR0aGlzLl9lZGl0ID0gZmFsc2U7XHJcbiAgICBcdFx0dGhpcy5fY2VsbC5zZXRBdHRyaWJ1dGUoJ2NvbnRlbnRlZGl0YWJsZScsICdmYWxzZScpO1xyXG4gICAgXHR9XHJcbiAgICBcdC8vIOaVsOaNruS/neWtmFxyXG4gICAgXHRpZih0aGlzLl92YWx1ZSAhPSB0aGlzLl9jZWxsLmlubmVyVGV4dCkge1xyXG4gICAgXHRcdHRoaXMuX3ZhbHVlID0gdGhpcy5fY2VsbC5pbm5lclRleHQ7XHJcbiAgICBcdFx0ZW1pdCgnZGF0YScsIHsgY21kOiAndXBkYXRlJywgaWQ6IHRoaXMuX2lkLCByb3c6IHRoaXMuX3JvdywgY29sOiB0aGlzLl9jb2wsIHZhbHVlOiB0aGlzLl92YWx1ZSB9KTtcclxuICAgIFx0fVxyXG4gICAgXHR0aGlzLnJlbW92ZUNsYXNzKCdvbicpO1xyXG4gICAgXHRyZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBibG9kKCkge1xyXG4gICAgXHR0aGlzLnRyaWdnZXJDbGFzcygnc3Ryb25nJyk7XHJcbiAgICBcdHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGl0YWxpYygpIHtcclxuICAgIFx0dGhpcy50cmlnZ2VyQ2xhc3MoJ2l0YWxpYycpO1xyXG4gICAgXHRyZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBhbGlnbihhbGlnbjpzdHJpbmcpIHtcclxuICAgIFx0dGhpcy5yZW1vdmVDbGFzcygnbGVmdCcpO1xyXG4gICAgXHR0aGlzLnJlbW92ZUNsYXNzKCdjZW50ZXInKTtcclxuICAgIFx0dGhpcy5yZW1vdmVDbGFzcygncmlnaHQnKTtcclxuICAgIFx0dGhpcy50cmlnZ2VyQ2xhc3MoYWxpZ24pO1xyXG4gICAgXHRyZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2VsbDsiLCIvKipcclxuICogTW9kdWxlIEV4cG9ydFxyXG4gKiBAYXV0aG9yICBBbGV4XHJcbiAqIEB2ZXJzaW9uIDIwMTkwNzI1XHJcbiAqL1xyXG5jbGFzcyBFeHBvcnQge1xyXG4gICAgcHJpdmF0ZSBfZGF0YTpBcnJheTxBcnJheTxhbnk+PjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihkYXRhOkFycmF5PEFycmF5PGFueT4+KSB7XHJcbiAgICAgICAgdGhpcy5fZGF0YSA9IGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgY3N2KGZpbGVOYW1lOnN0cmluZyA9ICcnKSB7XHJcbiAgICAgICAgaWYodGhpcy5fZGF0YSBpbnN0YW5jZW9mIEFycmF5ID09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHRocm93ICfmlbDmja7moLzlvI/kuI3mraPnoa7vvIzml6Dms5Xov5vooYzlr7zlh7rvvIEnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgdG1wID0gW107XHJcbiAgICAgICAgZm9yKGxldCByb3cgb2YgdGhpcy5fZGF0YSkge1xyXG4gICAgICAgICAgICBmb3IobGV0IGNlbGwgb2Ygcm93KSB7XHJcbiAgICAgICAgICAgICAgICAvLyDovazkuYnlpITnkIZcclxuICAgICAgICAgICAgICAgIC8vIFRPRE9cclxuICAgICAgICAgICAgICAgIHRtcC5wdXNoKGAkeyBjZWxsIHx8ICcnIH0sYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdG1wLnB1c2goJ1xcbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgdXJpICAgICAgID0gJ2RhdGE6dGV4dC9jc3Y7Y2hhcnNldD11dGYtOCxcXHVmZWZmJyArIGVuY29kZVVSSUNvbXBvbmVudCh0bXAuam9pbignJykpO1xyXG4gICAgICAgIGxldCBsaW5rICAgICAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgbGluay5ocmVmICAgICA9IHVyaTtcclxuICAgICAgICBsaW5rLmRvd25sb2FkID0gYCR7IGZpbGVOYW1lIHx8IG5ldyBEYXRlKCkuZ2V0VGltZSgpIH0uY3N2YDtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxpbmspO1xyXG4gICAgICAgIGxpbmsuY2xpY2soKTtcclxuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGxpbmspO1xyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgRXhwb3J0OyIsImltcG9ydCBDZWxsIGZyb20gJy4vY2VsbCc7XHJcbmltcG9ydCBFeHBvcnQgZnJvbSAnLi9leHBvcnQnO1xyXG5pbXBvcnQgU29ydCBmcm9tICcuL3NvcnQnO1xyXG5cclxuLyoqXHJcbiAqIE1vZHVsZSBNZXNzYWdlQnVzXHJcbiAqIEBhdXRob3IgIEFsZXhcclxuICogQHZlcnNpb24gMjAxOTA3MjVcclxuICovXHJcbmNsYXNzIE1lc3NhZ2VCdXMge1xyXG5cdHByaXZhdGUgX2FwcDphbnk7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOmFueSkge1xyXG4gICAgICAgIHRoaXMuX2FwcCA9IGFwcDtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCk6YW55IHtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMubWVzc2FnZUhhbmRsZXIuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLm1lc3NhZ2VIYW5kbGVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG1lc3NhZ2VIYW5kbGVyKGV2ZW50OmFueSkge1xyXG4gICAgICAgIGlmKCdvYmplY3QnICE9IHR5cGVvZiBldmVudCB8fCAhZXZlbnQuZGF0YS5oYXNPd25Qcm9wZXJ0eSgndHlwZScpIHx8ICdtZXNzYWdlQnVzJyAhPSBldmVudC5kYXRhLnR5cGUpIHJldHVybjtcclxuXHJcbiAgICAgICAgc3dpdGNoKGV2ZW50LmRhdGEuY29tcCkge1xyXG4gICAgICAgIFx0Y2FzZSAndG9vbHNiYXInOlxyXG4gICAgICAgIFx0XHR0aGlzLnRvb2xzYmFySGFuZGxlcihldmVudC5kYXRhKTtcclxuICAgICAgICBcdFx0YnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlICdjb2x1bW4nOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb2x1bW5IYW5kbGVyKGV2ZW50LmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIFx0Y2FzZSAnY2VsbCc6XHJcbiAgICAgICAgXHRcdHRoaXMuY2VsbEhhbmRsZXIoZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgXHRcdGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgY2FzZSAnZGF0YSc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFIYW5kbGVyKGV2ZW50LmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdG9vbHNiYXJIYW5kbGVyKGRhdGE6YW55KSB7XHJcbiAgICBcdHN3aXRjaChkYXRhLmNtZCkge1xyXG4gICAgICAgIFx0Y2FzZSAnc2F2ZSc6XHJcbiAgICAgICAgXHRcdG5ldyBFeHBvcnQodGhpcy5fYXBwLmRhdGEpLmNzdigpO1xyXG4gICAgICAgIFx0XHRicmVhaztcclxuXHJcbiAgICAgICAgXHRjYXNlICdib2xkJzpcclxuICAgICAgICBcdFx0aWYodGhpcy5fYXBwLmNlbGwpIHRoaXMuX2FwcC5jZWxsLmJsb2QoKTtcclxuICAgICAgICBcdFx0YnJlYWs7XHJcblxyXG4gICAgICAgIFx0Y2FzZSAnaXRhbGljJzpcclxuICAgICAgICBcdFx0aWYodGhpcy5fYXBwLmNlbGwpIHRoaXMuX2FwcC5jZWxsLml0YWxpYygpO1xyXG4gICAgICAgIFx0XHRicmVhaztcclxuXHJcbiAgICAgICAgXHRjYXNlICdhbGlnbkxlZnQnOlxyXG4gICAgICAgIFx0XHRpZih0aGlzLl9hcHAuY2VsbCkgdGhpcy5fYXBwLmNlbGwuYWxpZ24oJ2xlZnQnKTtcclxuICAgICAgICBcdFx0YnJlYWs7XHJcblxyXG4gICAgICAgIFx0Y2FzZSAnYWxpZ25DZW50ZXInOlxyXG4gICAgICAgIFx0XHRpZih0aGlzLl9hcHAuY2VsbCkgdGhpcy5fYXBwLmNlbGwuYWxpZ24oJ2NlbnRlcicpO1xyXG4gICAgICAgIFx0XHRicmVhaztcclxuXHJcbiAgICAgICAgXHRjYXNlICdhbGlnblJpZ2h0JzpcclxuICAgICAgICBcdFx0aWYodGhpcy5fYXBwLmNlbGwpIHRoaXMuX2FwcC5jZWxsLmFsaWduKCdyaWdodCcpO1xyXG4gICAgICAgIFx0XHRicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ2NvbHVtbkFzYyc6XHJcbiAgICAgICAgICAgICAgICB2YXIgc29ydCA9IG5ldyBTb3J0KHRoaXMuX2FwcC5kYXRhKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2FwcC5kYXRhID0gc29ydC5jb2x1bW4odGhpcy5fYXBwLmNvbHVtbiwgc29ydC5BU0MpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlICdjb2x1bW5EZXNjJzpcclxuICAgICAgICAgICAgICAgIHZhciBzb3J0ID0gbmV3IFNvcnQodGhpcy5fYXBwLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYXBwLmRhdGEgPSBzb3J0LmNvbHVtbih0aGlzLl9hcHAuY29sdW1uLCBzb3J0LkRFU0MpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2VsbEhhbmRsZXIoZGF0YTphbnkpIHtcclxuICAgIFx0aWYodGhpcy5fYXBwLmNlbGwgJiYgdGhpcy5fYXBwLmNlbGwuaWQgIT0gZGF0YS5pZCkge1xyXG4gICAgXHRcdHRoaXMuX2FwcC5jZWxsLmJsdXIoKTtcclxuICAgIFx0XHR0aGlzLl9hcHAuY2VsbCA9IG51bGw7XHJcbiAgICBcdH1cclxuICAgIFx0bGV0IGNlbGwgPSB0aGlzLl9hcHAuY2VsbDtcclxuICAgIFx0aWYoIWNlbGwpIHtcclxuICAgICAgICBcdGNlbGwgPSB0aGlzLl9hcHAuY2VsbCA9IG5ldyBDZWxsKGRhdGEuaWQpO1xyXG4gICAgXHR9XHJcblxyXG4gICAgXHRzd2l0Y2goZGF0YS5jbWQpIHtcclxuICAgICAgICAgICAgY2FzZSAnY29tcHV0ZSc6XHJcbiAgICAgICAgICAgICAgICBjZWxsLmNvbXB1dGUoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICBcdGNhc2UgJ2VkaXQnOlxyXG4gICAgICAgIFx0XHRjZWxsLmVkaXQoKTtcclxuICAgICAgICBcdFx0YnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjYXNlICdzZWxlY3QnOlxyXG4gICAgICAgICAgICAgICAgY2VsbC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYXBwLmxheW91dC5mb290ZXJiYXIuY2VsbE5hbWUgPSBkYXRhLmlkO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY29sdW1uSGFuZGxlcihkYXRhOmFueSkge1xyXG4gICAgICAgIHN3aXRjaChkYXRhLmNtZCkge1xyXG4gICAgICAgICAgICBjYXNlICdzZWxlY3QnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5fYXBwLmNvbHVtbiA9IGRhdGEuaWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hcHAubGF5b3V0LmZvb3RlcmJhci5jb2x1bW5OYW1lID0gZGF0YS5pZDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRhdGFIYW5kbGVyKGRhdGE6YW55KSB7XHJcbiAgICAgICAgc3dpdGNoKGRhdGEuY21kKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ3VwZGF0ZSc6XHJcbiAgICAgICAgICAgICAgICBsZXQgeyBpZCwgcm93LCBjb2wsIHZhbHVlIH0gPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYXBwLnNldENlbGwoaWQsIHJvdywgY29sLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVtaXQoY29tcG9uZW50OlN0cmluZywgZGF0YTphbnkpIHtcclxuXHR3aW5kb3cucG9zdE1lc3NhZ2UoT2JqZWN0LmFzc2lnbihkYXRhLCB7IHR5cGU6ICdtZXNzYWdlQnVzJywgY29tcDogY29tcG9uZW50IH0pLCAnKicpO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBNZXNzYWdlQnVzO1xyXG5leHBvcnQgeyBNZXNzYWdlQnVzLCBlbWl0IH07IiwiY2xhc3MgU29ydCB7XHJcblx0cmVhZG9ubHkgQVNDICA9IDE7XHJcblx0cmVhZG9ubHkgREVTQyA9IDA7XHJcblxyXG5cdHByaXZhdGUgX2RhdGE6YW55O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGRhdGE6YW55KSB7XHJcbiAgICAgICAgdGhpcy5fZGF0YSA9IGRhdGE7XHJcbiAgICB9XHJcblxyXG4gICAgY29sdW1uKGNvbHVtbk5hbWU6c3RyaW5nLCBhc2M6bnVtYmVyID0gMSwgcGFzc1RpdGxlOmJvb2xlYW4gPSB0cnVlKTphbnkge1xyXG4gICAgXHRsZXQgY29sID0gdGhpcy5jb252SW5kZXhCeUNvbHVtbihjb2x1bW5OYW1lKTtcclxuICAgICAgICBsZXQgdGFzOmFueTtcclxuXHJcbiAgICBcdGNvbnN0IGFzY2VuZCA9IChjb2w6bnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAoYTphbnksIGI6YW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZihpc05hTihhW2NvbF0pICYmIGlzTmFOKGJbY29sXSkpIHJldHVybiBhW2NvbF0gPiBiW2NvbF0gPyAxIDogLTE7XHJcbiAgICBcdFx0ICAgIHJldHVybiBhW2NvbF0gLSBiW2NvbF07XHJcbiAgICAgICAgICAgIH1cclxuXHRcdH1cclxuXHRcdGNvbnN0IGRlc2NlbmQgPSAoY29sOm51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gKGE6YW55LCBiOmFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYoaXNOYU4oYVtjb2xdKSAmJiBpc05hTihiW2NvbF0pKSByZXR1cm4gYltjb2xdID4gYVtjb2xdID8gMSA6IC0xO1xyXG4gICAgXHRcdCAgICByZXR1cm4gYltjb2xdIC0gYVtjb2xdO1xyXG4gICAgICAgICAgICB9XHJcblx0XHR9XHJcblxyXG4gICAgICAgIGlmKHBhc3NUaXRsZSkgdGFzID0gdGhpcy5fZGF0YS5zcGxpY2UoMCwgMSk7XHJcblx0XHRpZihhc2MpIHtcclxuXHRcdFx0dGhpcy5fZGF0YS5zb3J0KGFzY2VuZChjb2wpKTtcclxuXHRcdH1lbHNlIHtcclxuXHRcdFx0dGhpcy5fZGF0YS5zb3J0KGRlc2NlbmQoY29sKSk7XHJcblx0XHR9XHJcbiAgICAgICAgaWYocGFzc1RpdGxlICYmIHRhcykgdGhpcy5fZGF0YS51bnNoaWZ0KC4uLnRhcyk7XHJcblxyXG4gICAgXHRyZXR1cm4gdGhpcy5fZGF0YTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNvbnZJbmRleEJ5Q29sdW1uKGNvbHVtbk5hbWU6c3RyaW5nKTpudW1iZXIge1xyXG4gICAgXHRyZXR1cm4gY29sdW1uTmFtZS5jaGFyQ29kZUF0KDApIC0gNjU7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNvcnQ7IiwiaW1wb3J0IHsgZW1pdCB9IGZyb20gJy4uL21vZHVsZS9tZXNzYWdlJztcclxuXHJcbi8qKlxyXG4gKiBDb21wb25lbnQgRm9vdGVyYmFyXHJcbiAqIEBhdXRob3IgIEFsZXhcclxuICogQHZlcnNpb24gMjAxOTA3MjVcclxuICovXHJcbmNsYXNzIEZvb3RlcmJhciB7XHJcbiAgICBwcml2YXRlIF9jZWxsTmFtZSAgOnN0cmluZztcclxuICAgIHByaXZhdGUgX2NvbHVtbk5hbWU6c3RyaW5nO1xyXG5cclxuICAgIGFwcCAgICA6YW55O1xyXG4gICAgY29udGVudDphbnk7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOmFueSwgY29uZmlnOmFueSA9IG51bGwpIHtcclxuXHRcdHRoaXMuYXBwICAgICA9IGFwcDtcclxuXHRcdHRoaXMuY29udGVudCA9IGFwcC5xdWVyeVNlbGVjdG9yKCcuZXhjZWwtZm9vdGJhcicpO1xyXG4gICAgICAgIHRoaXMuX2NvbHVtbk5hbWUgPSBjb25maWcuY29sdW1uLnNlbGVjdCB8fCAnQSc7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCgpIHtcclxuICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGRlc3Ryb3koKSB7XHJcbiAgICBcdHRoaXMuY29udGVudCA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXIoKSB7XHJcbiAgICAgICAgdGhpcy5jb250ZW50LmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgPHNwYW4+5o6S5bqP5YiXOiA8c3Ryb25nPiR7IHRoaXMuX2NvbHVtbk5hbWUgfTwvc3Ryb25nPjwvc3Bhbj5cclxuICAgICAgICAgICAgPHNwYW4+5bey6YCJ5Y2V5YWD5qC8OiA8c3Ryb25nPiR7IHRoaXMuX2NlbGxOYW1lIHx8ICfmnKrpgInmi6knIH08L3N0cm9uZz48L3NwYW4+XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IGNlbGxOYW1lKGNlbGxOYW1lOnN0cmluZykge1xyXG4gICAgICAgIHRoaXMuX2NlbGxOYW1lID0gY2VsbE5hbWU7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXQgY29sdW1uTmFtZShjb2x1bW5OYW1lOnN0cmluZykge1xyXG4gICAgICAgIHRoaXMuX2NvbHVtbk5hbWUgPSBjb2x1bW5OYW1lO1xyXG4gICAgICAgIHRoaXMucmVuZGVyKCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvb3RlcmJhcjsiLCJpbXBvcnQgVG9vbHNiYXIgZnJvbSAnLi90b29sc2Jhcic7XHJcbmltcG9ydCBGb290ZXJiYXIgZnJvbSAnLi9mb290ZXJiYXInO1xyXG5pbXBvcnQgeyBlbWl0IH0gZnJvbSAnLi4vbW9kdWxlL21lc3NhZ2UnO1xyXG5cclxuLyoqXHJcbiAqIENvbXBvbmVudCBMYXlvdXRcclxuICogQGF1dGhvciAgQWxleFxyXG4gKiBAdmVyc2lvbiAyMDE5MDcyNVxyXG4gKi9cclxuY2xhc3MgTGF5b3V0IHtcclxuICAgIHByaXZhdGUgX3Rvb2xzYmFyOlRvb2xzYmFyO1xyXG4gICAgcHJpdmF0ZSBfZm9vdGVyYmFyOkZvb3RlcmJhcjtcclxuXHJcbiAgICB2aWV3ICAgOmFueTtcclxuICAgIGNvbmZpZyA6YW55O1xyXG4gICAgYXBwICAgIDphbnk7XHJcbiAgICByb3cgICAgOm51bWJlcjtcclxuICAgIGNvbCAgICA6bnVtYmVyO1xyXG4gICAgY29udGVudDphbnk7XHJcblxyXG4gICAgY29uc3RydWN0b3IodmlldzphbnksIGNvbmZpZzphbnkpIHtcclxuICAgICAgICB0aGlzLnZpZXcgICA9IHZpZXc7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XHJcblxyXG4gICAgICAgIHRoaXMucm93ICAgID0gY29uZmlnLmdyaWQucm93IHx8IDIwMDtcclxuICAgICAgICB0aGlzLmNvbCAgICA9IGNvbmZpZy5ncmlkLmNvbHVtbiB8fCAyNjtcclxuICAgICAgICB0aGlzLmFwcCAgICA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRoaXMuYXBwLmlkID0gJ2FwcC1leGNlbCc7XHJcbiAgICAgICAgdGhpcy5hcHAuY2xhc3NOYW1lICA9ICdleGNlbCc7XHJcbiAgICAgICAgdGhpcy5hcHAuaW5uZXJIVE1MICA9IHRlbXBsYXRlO1xyXG4gICAgICAgIHRoaXMuY29udGVudCAgICAgICAgPSB0aGlzLmFwcC5xdWVyeVNlbGVjdG9yKCcuZXhjZWwtY29udGVudCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoKSB7XHJcbiAgICAgICAgdGhpcy52aWV3LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIHRoaXMudmlldy5hcHBlbmRDaGlsZCh0aGlzLmFwcCk7XHJcblxyXG4gICAgICAgIC8vIOWIl+agh+etvlxyXG4gICAgICAgIGNvbnN0IGxhYmVsQ29sID0gdGhpcy5hcHAucXVlcnlTZWxlY3RvcignLmV4Y2VsLWxhYmVsLS1jb2x1bW4nKTtcclxuICAgICAgICBsZXQgbGFiZWxzID0gW107XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuY29sOyBpKyspIHtcclxuICAgICAgICAgICAgbGFiZWxzLnB1c2goYDxzcGFuIGNsYXNzPVwibGFiZWxcIj4keyBTdHJpbmcuZnJvbUNoYXJDb2RlKDY1ICsgaSkgfTwvc3Bhbj5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGFiZWxDb2wuaW5uZXJIVE1MID0gbGFiZWxzLmpvaW4oJycpO1xyXG5cclxuICAgICAgICAvLyDooYzmoIfnrb5cclxuICAgICAgICBjb25zdCBsYWJlbFJvdyA9IHRoaXMuYXBwLnF1ZXJ5U2VsZWN0b3IoJy5leGNlbC1sYWJlbC0tcm93Jyk7XHJcbiAgICAgICAgbGFiZWxzID0gW107XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMucm93OyBpKyspIHtcclxuICAgICAgICAgICAgbGFiZWxzLnB1c2goYDxzcGFuIGNsYXNzPVwibGFiZWxcIj4keyBpICsgMSB9PC9zcGFuPmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsYWJlbFJvdy5pbm5lckhUTUwgPSBsYWJlbHMuam9pbignJyk7XHJcblxyXG4gICAgICAgIC8vIOW3peWFt+agj1xyXG4gICAgICAgIGNvbnN0IHRvb2xzYmFyID0gdGhpcy5fdG9vbHNiYXIgPSBuZXcgVG9vbHNiYXIodGhpcy5hcHAsIHRoaXMuY29uZmlnKTtcclxuICAgICAgICB0b29sc2Jhci5pbml0KCkuYmluZEV2ZW50KCk7XHJcblxyXG4gICAgICAgIC8vIOW6leagj1xyXG4gICAgICAgIGNvbnN0IGZvb3RlcmJhciA9IHRoaXMuX2Zvb3RlcmJhciA9IG5ldyBGb290ZXJiYXIodGhpcy5hcHAsIHRoaXMuY29uZmlnKTtcclxuICAgICAgICBmb290ZXJiYXIuaW5pdCgpO1xyXG5cclxuICAgICAgICAvLyDnu5Hlrprkuovku7ZcclxuICAgICAgICB0aGlzLmFwcC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50LmNsaWNrLCB0cnVlKTtcclxuICAgICAgICB0aGlzLmFwcC5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIGV2ZW50LmRibGNsaWNrLCB0cnVlKTtcclxuICAgICAgICB0aGlzLmFwcC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGV2ZW50LmtleXVwLCB0cnVlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgZGVzdHJveSgpIHtcclxuICAgICAgICB0aGlzLmFwcC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50LmNsaWNrLCB0cnVlKTtcclxuICAgICAgICB0aGlzLmFwcC5yZW1vdmVFdmVudExpc3RlbmVyKCdkYmxjbGljaycsIGV2ZW50LmRibGNsaWNrLCB0cnVlKTtcclxuICAgICAgICB0aGlzLmFwcC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIGV2ZW50LmtleXVwLCB0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICBsb2FkKGRhdGE6YW55ID0gW10pIHtcclxuICAgICAgICBjb25zdCB0YWJsZXMgPSBbXTtcclxuICAgICAgICBmb3IobGV0IHIgPSAwOyByIDwgdGhpcy5yb3c7IHIrKykge1xyXG4gICAgICAgICAgICB0YWJsZXMucHVzaCgnPHRyPicpO1xyXG4gICAgICAgICAgICBmb3IobGV0IGMgPSAwOyBjIDwgdGhpcy5jb2w7IGMrKykge1xyXG4gICAgICAgICAgICAgICAgdGFibGVzLnB1c2goYDx0ZCBkYXRhLWlkPVwiJHsgU3RyaW5nLmZyb21DaGFyQ29kZSg2NSArIGMpICsgKHIrMSkgfVwiPiR7IGRhdGFbcl0gJiYgZGF0YVtyXVtjXSA/IGRhdGFbcl1bY10gOiAnJyB9PC90ZD5gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0YWJsZXMucHVzaCgnPC90cj4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb250ZW50LmlubmVySFRNTCA9IHRhYmxlcy5qb2luKCcnKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCB0b29sc2JhcigpOlRvb2xzYmFyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdG9vbHNiYXI7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0IGZvb3RlcmJhcigpOkZvb3RlcmJhciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvb3RlcmJhcjtcclxuICAgIH1cclxufTtcclxuXHJcbmNvbnN0IHRlbXBsYXRlID0gYFxyXG4gICAgPGRpdiBjbGFzcz1cImV4Y2VsLXRvb2xiYXJcIj48L2Rpdj5cclxuICAgIDxkaXYgY2xhc3M9XCJleGNlbC13aW5kb3dcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiZXhjZWwtbGFiZWwtLWNvbHVtblwiPjwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJleGNlbC1wYW5lbFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZXhjZWwtbGFiZWwtLXJvd1wiPjwvZGl2PlxyXG4gICAgICAgICAgICA8dGFibGUgY2xhc3M9XCJleGNlbC1jb250ZW50XCI+PC90YWJsZT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz1cImV4Y2VsLWZvb3RiYXJcIj48L2Rpdj5cclxuYDtcclxuXHJcbmNvbnN0IGV2ZW50ID0ge1xyXG4gICAgY2xpY2soZXZlbnQ6YW55KSB7XHJcbiAgICAgICAgc3dpdGNoKGV2ZW50LnRhcmdldC5ub2RlTmFtZSkge1xyXG4gICAgICAgICAgICBjYXNlICdURCc6XHJcbiAgICAgICAgICAgICAgICBlbWl0KCdjZWxsJywgeyBjbWQ6ICdzZWxlY3QnLCBpZDogZXZlbnQudGFyZ2V0LmRhdGFzZXQuaWQgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ1NQQU4nOlxyXG4gICAgICAgICAgICAgICAgbGV0IG5hbWU6c3RyaW5nID0gZXZlbnQudGFyZ2V0LmlubmVyVGV4dDtcclxuICAgICAgICAgICAgICAgIGlmKC9eW0EtWl17MX0kLy50ZXN0KG5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW1pdCgnY29sdW1uJywgeyBjbWQ6ICdzZWxlY3QnLCBpZDogbmFtZSB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBkYmxjbGljayhldmVudDphbnkpIHtcclxuICAgICAgICBzd2l0Y2goZXZlbnQudGFyZ2V0Lm5vZGVOYW1lKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ1REJzpcclxuICAgICAgICAgICAgICAgIGVtaXQoJ2NlbGwnLCB7IGNtZDogJ2VkaXQnLCBpZDogZXZlbnQudGFyZ2V0LmRhdGFzZXQuaWQgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAga2V5dXAoZXZlbnQ6YW55KSB7XHJcbiAgICAgICAgc3dpdGNoKGV2ZW50LnRhcmdldC5ub2RlTmFtZSkge1xyXG4gICAgICAgICAgICBjYXNlICdURCc6XHJcbiAgICAgICAgICAgICAgICBpZignRW50ZXInID09IGV2ZW50LmtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVtaXQoJ2NlbGwnLCB7IGNtZDogJ2NvbXB1dGUnLCBpZDogZXZlbnQudGFyZ2V0LmRhdGFzZXQuaWQgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgTGF5b3V0OyIsImltcG9ydCB7IGVtaXQgfSBmcm9tICcuLi9tb2R1bGUvbWVzc2FnZSc7XHJcblxyXG4vKipcclxuICogQ29tcG9uZW50IHRvb3NiYXJcclxuICogQGF1dGhvciAgQWxleFxyXG4gKiBAdmVyc2lvbiAyMDE5MDcyNVxyXG4gKi9cclxuY2xhc3MgVG9vbHNiYXIge1xyXG4gICAgYXBwICAgIDphbnk7XHJcbiAgICBjb25maWcgOmFueTtcclxuICAgIGJ1dHRvbnM6YW55O1xyXG4gICAgY29udGVudDphbnk7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOmFueSwgY29uZmlnOmFueSkge1xyXG5cdFx0dGhpcy5hcHAgICAgID0gYXBwO1xyXG5cdFx0dGhpcy5jb25maWcgID0gY29uZmlnO1xyXG5cdFx0dGhpcy5idXR0b25zID0gY29uZmlnLmJ1dHRvbnMgfHwge307XHJcblx0XHR0aGlzLmNvbnRlbnQgPSBhcHAucXVlcnlTZWxlY3RvcignLmV4Y2VsLXRvb2xiYXInKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0KCkge1xyXG4gICAgXHRjb25zdCBidG5zID0gW107XHJcbiAgICBcdGZvcihsZXQgYnRuIG9mIHRoaXMuYnV0dG9ucykge1xyXG4gICAgXHRcdGlmKCd8JyA9PT0gYnRuKSB7XHJcbiAgICBcdFx0XHRidG5zLnB1c2goJzxociBjbGFzcz1cInNwXCIgLz4nKTtcclxuICAgIFx0XHR9ZWxzZSB7XHJcbiAgICBcdFx0XHRidG5zLnB1c2goYDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGRhdGEtY21kPVwiJHsgYnRuLmNtZCB9XCIgJHsgYnRuLmRpc2FibGVkID8gJ2Rpc2FibGVkJyA6ICcnIH0gY2xhc3M9XCJleGNlbC10b29sYmFyLS1idG5cIj4keyBidG4udGV4dCB9PC9idXR0b24+YCk7XHJcbiAgICBcdFx0fVxyXG4gICAgXHR9XHJcbiAgICBcdHRoaXMuY29udGVudC5pbm5lckhUTUwgPSBidG5zLmpvaW4oJycpO1xyXG5cclxuICAgIFx0cmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcblxyXG4gICAgYmluZEV2ZW50KCkge1xyXG4gICAgXHR0aGlzLmNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudC5jbGljaywgdHJ1ZSk7XHJcblxyXG4gICAgXHRyZXR1cm4gdGhpcztcclxuICAgIH1cclxuXHJcbiAgICBkZXN0cm95KCkge1xyXG4gICAgXHR0aGlzLmNvbnRlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudC5jbGljaywgdHJ1ZSk7XHJcbiAgICBcdHRoaXMuY29udGVudCA9IG51bGw7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGV2ZW50ID0ge1xyXG4gICAgY2xpY2soZXZlbnQ6YW55KSB7XHJcbiAgICAgICAgaWYoJ0JVVFRPTicgIT0gZXZlbnQudGFyZ2V0Lm5vZGVOYW1lKSByZXR1cm47XHJcbiAgICAgICAgY29uc3QgY21kOnN0cmluZyA9IGV2ZW50LnRhcmdldC5kYXRhc2V0LmNtZDtcclxuICAgICAgICBzd2l0Y2goY21kKSB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBlbWl0KCd0b29sc2JhcicsIHsgY21kIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBUb29sc2JhcjsiXX0=
